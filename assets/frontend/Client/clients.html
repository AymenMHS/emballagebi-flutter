<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../style-index.css">
  <title>EmballageBI</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap"
    rel="stylesheet">
  <script src="../runtime_config.js"></script>

  <!-- api wrapper depends on window.API_BASE -->
  <script src="../api.js"></script>

  <!-- verify-connected uses api/buildApiUrl & binds logout -->
  <script src="../verify-connected.js"></script>
  <script src="../notification.js"></script>
  <!-- then page-specific logic -->
  <script src="./clients.js?v=2"></script>
  <script src="./soustraitant.js"></script>
  <script src="../ui-shell.js"></script>
  <link rel="stylesheet" href="../notif.css">
  <link rel="stylesheet" href="../responsive.css">
  <style>
    .index-start {
      background: linear-gradient(180deg, rgb(136, 172, 155) 0%, rgb(105, 143, 124) 100%);
      width: 100vw;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .header {
      animation: fadeInDown;
      animation-duration: 0.5s;
    }

    .index-container {
      animation: fadeInUp;
      animation-duration: 0.5s;
    }


    .page-info {
      color: white;
      font-family: 'Nunito', sans-serif;
      font-size: 16px;
      font-weight: 600;
    }

    .container .all-clients .client .title-client h1 {
      margin: 0;
      padding: 0;
      font-size: 15px;
      width: 95%;
      text-align: center;
      white-space: nowrap;
      /* empêche le retour à la ligne */
      overflow: hidden;
      /* cache le surplus */
      text-overflow: ellipsis;
    }

    .empty-state {
      width: 100%;
      height: 300px;
      display: flex;
      justify-content: center;
      flex-direction: column;
      align-items: center;
    }

    .empty-state img {
      width: 50px;
      height: 50px;
      opacity: 0.5;
    }

    .empty-state h3 {
      font-family: 'Nunito', sans-serif;
      font-size: 20px;
      font-weight: bold;
      opacity: 0.5;
      margin: 0;
      padding: 0;
    }

    .empty-state p {
      font-family: 'Nunito', sans-serif;
      font-size: 12px;
      font-weight: bold;
      opacity: 0.5;
      margin: 0;
      padding: 0;
    }



    .index-start .logo {
      width: 30% !important;
    }

    .index-start .logo img {
      width: 60px !important;
      height: 60px !important;
      display: block;
      transition: transform 0.25s ease;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
      /* propre sur mobile */
    }

    .index-start .logo img:hover,
    .index-start .logo img:focus {
      transform: scale(1.05);
      /* Agrandit de 5% */
    }

    .index-start .logo img:active {
      transform: scale(1.00);
    }

    .index-start .logo .title-logo h1 {
      font-size: 30px !important;
      width: 300px !important;
      top: 10px !important;
    }

    .index-start .logo .title-logo p {
      font-size: 18px !important;
      color: rgb(255, 36, 36);
      margin: 0;
      padding: 0;
      position: absolute;
      bottom: -3px !important;
      right: -40px !important;
      font-weight: 600;
    }

    .returnBtn img {
      width: 30px;
      height: 30px;
      filter: invert(1);
    }

    .returnBtn img:hover {
      opacity: 0.5;
      cursor: pointer;
      transition: 0.3s ease;
    }

    /* Sidebar & sidenotif mobile-friendly */
    .sidebar,
    .sidenotif {
      position: fixed;
      top: 0;
      height: 100vh;
      z-index: 10001;
      will-change: transform;
      touch-action: pan-y;
      /* on permet le scroll vertical, on gère horizontal manuellement */
      -webkit-overflow-scrolling: touch;
    }

    /* largeur par défaut (desktop) */
    .sidebar {
      left: 0;
      width: 280px;
      transform: translateX(-100%);
      transition: transform 280ms ease;
    }

    .sidenotif {
      right: 0;
      width: 360px;
      transform: translateX(100%);
      transition: transform 280ms ease;
    }

    /* overlay (déjà .filterblack dans ton HTML, on s'assure du style) */
    .filterblack {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      z-index: 10000;
      display: none;
      opacity: 0;
      transition: opacity 220ms ease;
      -webkit-tap-highlight-color: transparent;
    }

    /* état ouvert (JS ajoute/retire ces classes) */
    .sidebar.open {
      transform: translateX(0) !important;
    }

    .sidenotif.open {
      transform: translateX(0) !important;
    }

    .filterblack.visible {
      display: block;
      opacity: 0.8;
    }

    /* Ajustements responsive : faire icônes visibles sur téléphone si besoin */
    @media (max-width: 900px) {
      .sidebar {
        width: 78vw;
        max-width: 360px;
      }

      .sidenotif {
        width: 86vw;
        max-width: 420px;
      }

      .header .burger img {
        width: 26px;
        height: 26px;
      }

      /* icône plus petite */
    }

    /* Interaction tactile pendant le drag : disable transition while dragging */
    .sidebar.dragging,
    .sidenotif.dragging {
      transition: none !important;
    }
  </style>
</head>

<body>

  <div class="filterblack"></div>
  <div class="sidenotif" data-user-id="">
    <div class="notif-header">
      <img src="../img/icon/notifications.png">
      <h2>Notifications</h2>
    </div>
    <div class="notif-elements" style="width: 360px !important;">
      <div class="notif-loading">
        <p>Chargement des notifications...</p>
      </div>
    </div>
  </div>
  <div class="sidebar">
    <img src="../img/icon/menu.png" alt="Close" class="close-sidebar">
    <div class="logo">
      <img src="../img/logoblanc.png" alt="EmballageBI">
      <div class="title-logo">
        <h1>Emballage BI</h1>
        <p>2026</p>
      </div>
    </div>
    <nav class="sidebar-nav">
      <ul>
        <li onclick="window.location.href = '../index.html'" onclick="window.location.href = '../index.html'"><a
            href="#"><img src="../img/icon/home.png" alt="Home"> Tableau de bord</a></li>
        <hr>
        <li onclick="window.location.href = '../Plaque/suiviplaque.html'"><a href="#"><img
              src="../img/icon/papeterie-papiers-empiles.png" alt="Plaques"> Suivi des Plaques</a></li>
        <li onclick="window.location.href = '../Plaque/plaques.html'"><a href="#"><img src="../img/icon/plaques.png"
              alt="Plaques"> Plaques</a></li>
        <hr>
        <li onclick="window.location.href = '../Client/clients.html'"><a href="#"><img src="../img/icon/client.png"
              alt="Client"> Clients</a></li>
        <li onclick="window.location.href = '../Produit/produits.html'"><a href="#"><img
              src="../img/icon/produit - Copie.png" alt="Produit"> Produits</a></li>
        <li onclick="window.location.href = '../Conception/conceptions.html'"><a href="#"><img
              src="../img/icon/personnalisation1.png" alt="Conception"> Conceptions</a></li>
        <hr>
        <li onclick="window.location.href = '../Scan/scan.html'"><a href="#"><img src="../img/icon/qrcode.png" alt="QR">
            Scan
            QR</a></li>
        <li onclick="window.location.href = '../Annonces/annonces.html'"><a href="#"><img src="../img/icon/annonce.png"
              alt="Annonces"> Annonces</a></li>
        <hr>
        <li onclick="window.location.href = '../User/profil.html'"><a href="#"><img src="../img/icon/user.png"
              alt="User">
            Profil</a></li>
        <li onclick="window.location.href = '../Parametres/parametres.html'"><a href="#"><img
              src="../img/icon/parametres.png" alt="Parametres"> Parametres</a></li>

      </ul>
      <a href="#" id="logoutBtn"><img src="../img/icon/se-deconnecter.png" alt="Parametres"> Se deconnecter</a>
    </nav>
  </div>
  <div class="index-start">
    <div class="header" style="justify-content: space-evenly;">
      <div class="user-space" style="display: flex;justify-content: flex-start;width: 15%;">
        <div class="burger" style="margin-left: 30px;">
          <img src="../img/icon/menu.png" alt="Menu">
        </div>
        <div class="returnBtn"
          style="margin-left: 40px;width: 40px;height: 40px;display: flex;justify-content: center;align-items: center;"
          onclick="window.location.href='../index.html'">
          <img src="../img/icon/retourner.png">
        </div>
      </div>
      <div class="logo" onclick="window.location.href='../index.html'">
        <img src="../img/logoblanc.png" alt="EmballageBI" data-red="../img/logorouge.png" tabindex="0" />
      </div>
      <div class="user-space" style="display: flex;justify-content: flex-end;width: 15%;">
        <div class="notif-user">
          <img src="../img/icon/notifications.png" alt="Notifications">
          <span class="notif-count">0</span>
        </div>
        <div class="user-info" onclick="window.location.href='../user/profil.html'">
          <img src="../img/icon/profil.png" alt="User">
        </div>
      </div>
    </div>
    <div class="index-container">
      <div class="linkpages">
        <a href="../index.html">Tableau de bord </a> > Clients
      </div>
      <div class="all-onglets-container">
        <div class="btns-onglets">
          <div class="onglet active">
            <img src="../img/icon/profilclient.png" alt="Plaques">
            <span>Gestion des Clients</span>
          </div>
          <div class="onglet">
            <img src="../img/icon/accord.png" alt="sous-traités">
            <span>Gestion des sous-traitant</span>
          </div>
        </div>
        <div class="onglet-container">
          <div class="onglet-header">
            <div class="search-plaques">
              <img src="../img/icon/recherche.png" alt="Search">
              <input type="text" placeholder="Rechercher un client...">
            </div>
            <div class="btns-header">
              <button class="btn-add-plaque" type="button" onclick="window.location.href='newclient.html'">
                <img src="../img/icon/addclient.png" alt="addclient">
                <p>Ajouter un client</p>
              </button>
            </div>
          </div>
          <div class="container">
            <div class="trie-clients">
              <select>
                <option>-- Trier par --</option>
                <option>Date d'ajout</option>
                <option>En cours</option>
                <option>TOP Clients</option>
              </select>
            </div>
            <div class="all-clients">
              <!-- Client cards will be loaded here by JavaScript -->
            </div>
          </div>
          <div class="onglet-pagination pagination-container">
            <p id="paginationSummary">Affichage des clients</p>

            <div class="pagination" role="navigation" aria-label="Pagination clients" style="gap:10px;">
              <button id="prevPageBtn" class="pagination-btn" type="button" aria-label="Page précédente" disabled>
                &larr;
              </button>

              <span class="page-info" id="pageInfo" aria-live="polite">Page 1 / 1</span>

              <button id="nextPageBtn" class="pagination-btn" type="button" aria-label="Page suivante" disabled>
                &rarr;
              </button>
            </div>
          </div>

          <!-- Loading text (affiché lors du fetch) -->
          <div class="loading-clients" style="display:none; text-align:center; margin-top:8px; color:#333;">
            Chargement des clients...
          </div>
        </div>
        <!-- ================= End pagination ================= -->
        <div class="onglet-container" id="soustraitants-container" style="display: none;">
          <div class="onglet-header">
            <div class="btns-header" style="display:flex; justify-content: flex-end;width: 100%;">
              <button class="btn-add-plaque" type="button" onclick="window.location.href='soustraitant.html'">
                <img src="../img/icon/client.png" alt="addclient">
                <p>Ajouter un Sous-traitant</p>
              </button>
            </div>
          </div>
          <div class="container" style="height: 90%;">
            <div class="all-clients">
              <!-- Sous-traitant cards will be loaded here by JavaScript -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>